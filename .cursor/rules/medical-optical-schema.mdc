---
description: 
globs: 
alwaysApply: false
---
# Medical/Optical Database Schema

The application uses a comprehensive database schema for a medical/optical management system defined in [src/lib/db/schema.ts](mdc:src/lib/db/schema.ts).

## Core Data Models

### Patient Information
- **Users (patients)**: Personal and contact information, medical status
  - Basic identification (name, gender, national_id)
  - Contact details (address, phone numbers, email)
  - Account status (membership dates, billing preferences)

### Medical Records
- **Medical Logs**: Historical medical notes for patients
- **Optical Exams**: Eye examination records
  - Clinical information (clinic, examiner, date)
  - Test details and results
  - Dominant eye information

### Prescription Data
- **Optical Eye Exam**: Detailed measurements for each eye
  - Historical (old) measurements
  - Objective measurements
  - Subjective measurements
  - Add-on specifications

### Product Orders
- **Optical Orders**: Orders for glasses or other optical products
- **Contact Lens**: Contact lens specifications and orders
- **Frames**: Eyeglass frame details

### Billing Information
- **Billings**: Financial records for services and products
- **Order Line Items**: Individual items in an order

## Database Relationships

The schema uses foreign keys to maintain relationships between tables:
- Users -> Medical Logs (one-to-many)
- Users -> Optical Exams (one-to-many)
- Optical Exams -> Optical Eye Exam (one-to-many)
- Contact Lens -> Contact Eye (one-to-many)
- Billings -> Order Line Items (one-to-many)

